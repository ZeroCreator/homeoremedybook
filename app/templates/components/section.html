{% if title is defined and content is defined %}
<div class="card-section">
    <h2>{{ title }}</h2>

    {% if images is defined and images %}
        {% if images is string or images|length == 1 %}
        <div class="section-image-wrapper single-image">
            <img src="{{ url_for('static', filename='images/' + (images if images is string else images[0])) }}"
                 alt="{{ title }}"
                 class="section-image">
            {% if captions is defined and captions and (captions is string or captions|length >= 1) %}
            <p class="image-caption">
                {{ captions if captions is string else captions[0] }}
            </p>
            {% endif %}
        </div>
        {% else %}
        <div class="section-images-wrapper dual-images">
            {% for img in images[:2] %}
            <div class="dual-image-container">
                <img src="{{ url_for('static', filename='images/' + img) }}"
                     alt="{{ title }}"
                     class="section-image">
                {% if captions is defined and captions and captions|length > loop.index0 %}
                <p class="image-caption">{{ captions[loop.index0] }}</p>
                {% endif %}
            </div>
            {% endfor %}
        </div>
        {% endif %}
    {% endif %}

    <div class="section-content">
        {% if content is string %}
            {{ content|markdown|safe }}
        {% else %}
            <ul class="section-list">
                {% for item in content %}
                    <li>{{ item }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    </div>

    {% if custom_blocks is defined and custom_blocks %}
        {% for block in custom_blocks %}
            <div class="custom-block">
                <div class="custom-block-inner">
                    {% if block.image %}
                    <div class="custom-block-image">
                        <img
                            src="{{ url_for('static', filename='images/' + block.image) }}"
                            alt="{{ block.alt|default('Custom image') }}"
                        >
                        {% if block.caption %}
                        <p class="image-caption">{{ block.caption }}</p>
                        {% endif %}
                    </div>
                    {% endif %}

                    <div class="custom-block-content">
                        {% if block.title %}
                        <h3 class="custom-block-title">{{ block.title }}</h3>
                        {% endif %}

                        {% if block.content %}
                        <div class="custom-block-text">
                            {{ block.content|markdown|safe }}
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        {% endfor %}
    {% endif %}

</div>
{% endif %}